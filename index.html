<!DOCTYPE html>
<html  style="width: 100%; height: 100%;">
  <head>
    <meta charset="utf-8" />
    <title><!!!-Title-!!!></title>
    <script src="echarts.min.js"></script>
  </head>
  <body style="width: 100%; height: 100%;">
    <div id="echart" style="width: 100%; height: 100%;"></div>
    <script type="text/javascript">
      var myChart = echarts.init(document.getElementById("echart"));
      window.addEventListener('load',myChart.resize)
      window.addEventListener('resize',myChart.resize)
    </script>
  </body>
  <script>
    function WebSocketTest() {
      if ("WebSocket" in window) {
        var ws = new WebSocket("<!!!-WebSocket-Url-!!!>");

        ws.onopen = function () {
          // ws.send("begin");
        };

        ws.onmessage = function (evt) {
          var received_msg = JSON.parse(evt.data);
          myChart.setOption(received_msg);
        };

        ws.onclose = function () {
          alert("Connection closed");
        };
      } else {
        alert("Your browser doesn't support WebSocket!");
      }
    }
    WebSocketTest();
  </script>
</html>
